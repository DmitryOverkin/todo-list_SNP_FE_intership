(()=>{const e=document.querySelector(".todo__input"),t=document.querySelector(".todo__list"),c=document.querySelector(".todo__counter"),n=document.querySelector(".todo__toggle-all"),o=document.querySelector(".todo__actions"),d=document.querySelector(".todo__btn--clear"),l=document.querySelector(".todo__btn--all"),a=document.querySelector(".todo__btn--active"),r=document.querySelector(".todo__btn--completed");let i=k()?k():[],s="all";function u(e){let t=JSON.stringify(e);localStorage.setItem("todos",t)}function k(){let e=localStorage.getItem("todos");return JSON.parse(e)}function m(){t.innerHTML="",("active"===s?i.filter(e=>!1===e.checked):"completed"===s?i.filter(e=>!0===e.checked):i).forEach((e,c)=>{let n=document.createElement("li");n.className="todo__item",e.checked&&n.classList.add("checked"),n.textContent=e.text;let o=document.createElement("span");o.textContent="×",o.className="delete__item",o.addEventListener("click",()=>{i.splice(c,1),u(i),m()});let d=document.createElement("span");d.className="check__btn",e.checked&&(d.classList.add("checked"),d.textContent="✔"),d.addEventListener("click",()=>{e.checked=!e.checked,u(i),m()}),n.addEventListener("dblclick",t=>{const c=document.createElement("input");c.className="edit__todo",c.value=e.text,c.addEventListener("keydown",t=>{"Enter"===t.key&&(e.text=t.target.value,u(i),m())}),n.appendChild(c)}),n.appendChild(d),n.appendChild(o),t.appendChild(n)}),i.length>=1?(h(n,"block"),h(o,"flex")):(_(n,"block"),_(o,"flex")),isShow=i.some(e=>!0===e.checked),isShow?h(d,"block"):_(d,"block"),function(){let e=i.filter(e=>!0!==e.checked).length;c.textContent=e}()}function h(e,t){e.classList.add(`${t}`)}function _(e,t){e.classList.remove(`${t}`)}e.addEventListener("keydown",e=>{if("Enter"===e.key){if(""==e.target.value.trim())return;i.push({text:e.target.value,checked:!1}),u(i),m(),e.target.value=""}}),n.addEventListener("click",function(){const e=i.every(e=>!0===e.checked);var t;t=!e,i.forEach(e=>{e.checked=t}),u(i),m()}),d.addEventListener("click",()=>{i=i.filter(e=>!1===e.checked),u(i),m()}),l.addEventListener("click",()=>{s="all",m()}),a.addEventListener("click",()=>{s="active",m()}),r.addEventListener("click",()=>{s="completed",m()}),m()})();